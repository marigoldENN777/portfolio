<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Radial Animation</title>
  <style>
    body {
      margin: 0;
      background: #050812;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
      border-radius: 16px;
      background: #ffffff;
    }
  </style>
</head>
<body>
  <canvas id="art" width="600" height="600"></canvas>

  <script>
    const canvas = document.getElementById('art');
    const context = canvas.getContext('2d');

    const width = canvas.width;
    const height = canvas.height;

    const cx = width * 0.5;
    const cy = height * 0.5;
    const w = width * 0.01;
    const h = height * 0.15;
    const num = 80;
    const baseRadius = width * 0.3;

    function mapRange(value, inMin, inMax, outMin, outMax) {
      const t = (value - inMin) / (inMax - inMin);
      return outMin + t * (outMax - outMin);
    }

    const start = performance.now();

    function render(now) {
      const time = (now - start) / 1000; // seconds

      // background
      context.fillStyle = 'white';
      context.fillRect(0, 0, width, height);

      for (let i = 0; i < num; i++) {
        const slice = (Math.PI * 2) / num;
        const angle = slice * i;

        const radius =
          baseRadius +
          Math.sin(time + i * 0.2) * width * 0.05;

        const x = cx + radius * Math.sin(angle);
        const y = cy + radius * Math.cos(angle);

        // --- rectangles (rays) ---
        context.save();
        context.translate(x, y);
        context.rotate(-angle + Math.sin(time + i * 0.3) * 0.3);

        const scaleX = mapRange(
          Math.sin(time + i * 0.15),
          -1, 1,
          0.3, 1.8
        );
        const scaleY = mapRange(
          Math.cos(time + i * 0.25),
          -1, 1,
          0.2, 0.6
        );
        context.scale(scaleX, scaleY);

        context.fillStyle = `hsl(${mapRange(i, 0, num, 180, 260)}, 80%, 60%)`;
        context.beginPath();
        context.rect(-w * 0.5, -h * 0.5, w, h);
        context.fill();
        context.restore();

        // --- arcs ---
        context.save();
        context.translate(cx, cy);
        context.rotate(-angle);

        context.lineWidth = mapRange(
          Math.sin(time * 2 + i * 0.3),
          -1, 1,
          3, 20
        );
        context.strokeStyle = `hsla(${mapRange(i, 0, num, 200, 300)}, 80%, 40%, 0.8)`;
        context.lineCap = 'round';

        const arcRadius =
          radius *
          mapRange(Math.sin(time + i * 0.4), -1, 1, 0.6, 1.4);

        const arcStart = slice * mapRange(Math.sin(time + i), -1, 1, -4, 1);
        const arcEnd = slice * mapRange(Math.cos(time + i * 0.5), -1, 1, 1, 6);

        context.beginPath();
        context.arc(0, 0, arcRadius, arcStart, arcEnd);
        context.stroke();
        context.restore();
      }

      requestAnimationFrame(render);
    }

    requestAnimationFrame(render);
  </script>
</body>
</html>
